<app-loading-page *ngIf="isLoadingPage"></app-loading-page>
<p-card styleClass="b-custom">
    <ng-template  pTemplate="content">
        <div class="{{ isLoadingPage ? 'b-loading' : '' }}">
            <p-tabView styleClass="custom-tabview" [(activeIndex)]="activeIndex" >
                <p-tabPanel>
                    <ng-template pTemplate = "header">
                        <span> Thông tin chung
                            <!-- <p-badge class="mb-2" [value]="countChangeOfAll" severity="danger" styleClass="mr-2"></p-badge> -->
                        </span>
                    </ng-template>
                    <h6>Người trình duyệt: {{ userRequest?.userName + ' - ' + userRequest?.displayName}} - {{ data?.requestDate | datetimeview}} </h6>
                    <p-table 
                        #businessCustomerTable 
                        [value]="[businessCustomerData]" [loading]="isLoading" [rowHover]="true" [scrollable]="true"
                        responsiveLayout="scroll" dataKey="code"
                        styleClass="custom-table order">
                        <ng-template pTemplate="header" >
                            <tr>
                                <th style="width: 10%;"> # </th>
                                <th style="width: 40%;">
                                    <p-tag styleClass="mr-2 text-base" styleClass = "bg-orange-500 text-base">
                                        Dữ liệu gốc 
                                    </p-tag>
                                    </th>
                                <th style="width: 10%;">  </th>
                                
                                <th style="width: 40%;">
                                    <p-tag styleClass="mr-2 text-base"  styleClass = "bg-cyan-500 text-base">
                                        Dữ liệu thay đổi  
                                    </p-tag> 
                                </th>
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="body" let-row>
                            <tr *ngIf=" businessCustomerTempData.code || businessCustomerData.code "  >
                                <td style="width: 10%;"> Mã doanh nghiệp </td>
                                <td style="width: 40%;">
                                    <div>
                                        <div class="b-wrapper-info b-cut-text"> {{businessCustomerData?.code ?? 'None'  }}  </div>
                                    </div>
                                </td>
                                <td style="width: 10%;"><i class="pi pi-arrow-circle-right"></i></td>
                                <td style="width: 40%;"> 
                                    <div>
                                        <div class="b-wrapper-info b-cut-text"> {{ businessCustomerTempData?.code ?? 'None' }}   </div>
                                    </div>
                                </td>
                            </tr>
                            <tr *ngIf="businessCustomerTempData.name || businessCustomerData.name"  >
                                <td style="width: 10%;"> Tên doanh nghiệp </td>
                                <td style="width: 40%;">
                                    <div>
                                        <div class="b-wrapper-info b-cut-text"> {{businessCustomerData?.name ?? 'None' }}  </div>
                                    </div>
                                </td>
                                <td style="width: 10%;"><i class="pi pi-arrow-circle-right"></i></td>
                                <td style="width: 40%;"> 
                                    <div>
                                        <div class="b-wrapper-info b-cut-text"> {{ businessCustomerTempData?.name ?? 'None' }}   </div>
                                    </div>
                                </td>
                            </tr>
                            <tr *ngIf="businessCustomerTempData.shortName || businessCustomerData.shortName"  >
                                <td style="width: 10%;"> Tên viết tắt </td>
                                <td style="width: 40%;">
                                    <div>
                                        <div class="b-wrapper-info b-cut-text"> {{businessCustomerData?.shortName  ?? 'None' }}  </div>
                                    </div>
                                </td>
                                <td style="width: 10%;"><i class="pi pi-arrow-circle-right"></i></td>
                                <td style="width: 40%;"> 
                                    <div>
                                        <div class="b-wrapper-info b-cut-text"> {{ businessCustomerTempData?.shortName ?? 'None' }}   </div>
                                    </div>
                                </td>
                            </tr>
                            <tr *ngIf="businessCustomerTempData.address || businessCustomerData.address"  >
                                <td style="width: 10%;"> Địa chỉ </td>
                                <td style="width: 40%;">
                                    <div>
                                        <div class="b-wrapper-info b-cut-text"> {{businessCustomerData?.address  ?? 'None' }}  </div>
                                    </div>
                                </td>
                                <td style="width: 10%;"><i class="pi pi-arrow-circle-right"></i></td>
                                <td style="width: 40%;"> 
                                    <div>
                                        <div class="b-wrapper-info b-cut-text"> {{ businessCustomerTempData?.address  ?? 'None'}}   </div>
                                    </div>
                                </td>
                            </tr>
                            <tr *ngIf="businessCustomerTempData.tradingAddress || businessCustomerData.tradingAddress"  >
                                <td style="width: 10%;"> Địa chỉ giao dịch </td>
                                <td style="width: 40%;">
                                    <div>
                                        <div class="b-wrapper-info b-cut-text"> {{businessCustomerData?.tradingAddress ?? 'None'  }}  </div>
                                    </div>
                                </td>
                                <td style="width: 10%;"><i class="pi pi-arrow-circle-right"></i></td>
                                <td style="width: 40%;"> 
                                    <div>
                                        <div class="b-wrapper-info b-cut-text"> {{ businessCustomerTempData?.tradingAddress ?? 'None' }}   </div>
                                    </div>
                                </td>
                            </tr>
                            <tr *ngIf="businessCustomerTempData.nation || businessCustomerData.nation"  >
                                <td style="width: 10%;"> Quốc gia </td>
                                <td style="width: 40%;">
                                    <div>
                                        <div class="b-wrapper-info b-cut-text"> {{businessCustomerData?.nation ?? 'None' }}  </div>
                                    </div>
                                </td>
                                <td style="width: 10%;"><i class="pi pi-arrow-circle-right"></i></td>
                                <td style="width: 40%;"> 
                                    <div>
                                        <div class="b-wrapper-info b-cut-text"> {{ businessCustomerTempData?.nation ?? 'None'}}   </div>
                                    </div>
                                </td>
                            </tr>
                            <tr *ngIf="businessCustomerTempData.phone || businessCustomerData.phone"  >
                                <td style="width: 10%;"> Số điện thoại</td>
                                <td style="width: 40%;">
                                    <div>
                                        <div class="b-wrapper-info b-cut-text"> {{businessCustomerData?.phone ?? 'None' }}  </div>
                                    </div>
                                </td>
                                <td style="width: 10%;"><i class="pi pi-arrow-circle-right"></i></td>
                                <td style="width: 40%;"> 
                                    <div>
                                        <div class="b-wrapper-info b-cut-text"> {{ businessCustomerTempData?.phone ?? 'None'  }}   </div>
                                    </div>
                                </td>
                            </tr>
                            <tr *ngIf="businessCustomerTempData.mobile|| businessCustomerData.mobile"  >
                                <td style="width: 10%;"> Số điện thoại khác </td>
                                <td style="width: 40%;">
                                    <div>
                                        <div class="b-wrapper-info b-cut-text"> {{businessCustomerData?.mobile  ?? 'None'}}  </div>
                                    </div>
                                </td>
                                <td style="width: 10%;"><i class="pi pi-arrow-circle-right"></i></td>
                                <td style="width: 40%;"> 
                                    <div>
                                        <div class="b-wrapper-info b-cut-text"> {{ businessCustomerTempData?.mobile ?? 'None'}}   </div>
                                    </div>
                                </td>
                            </tr>
                            <tr *ngIf="businessCustomerTempData.email || businessCustomerData.email"  >
                                <td style="width: 10%;"> Thư điện tử </td>
                                <td style="width: 40%;">
                                    <div>
                                        <div class="b-wrapper-info b-cut-text"> {{businessCustomerData?.email ?? 'None' }}  </div>
                                    </div>
                                </td>
                                <td style="width: 10%;"><i class="pi pi-arrow-circle-right"></i></td>
                                <td style="width: 40%;"> 
                                    <div>
                                        <div class="b-wrapper-info b-cut-text"> {{ businessCustomerTempData?.email  ?? 'None'}}   </div>
                                    </div>
                                </td>
                            </tr>
                            <tr *ngIf="businessCustomerTempData.taxCode || businessCustomerData.taxCode"  >
                                <td style="width: 10%;"> Mã số thuế </td>
                                <td style="width: 40%;">
                                    <div>
                                        <div class="b-wrapper-info b-cut-text"> {{businessCustomerData?.taxCode ?? 'None' }}  </div>
                                    </div>
                                </td>
                                <td style="width: 10%;"><i class="pi pi-arrow-circle-right"></i></td>
                                <td style="width: 40%;"> 
                                    <div>
                                        <div class="b-wrapper-info b-cut-text"> {{ businessCustomerTempData?.taxCode ?? 'None' }}   </div>
                                    </div>
                                </td>
                            </tr>
                            <tr *ngIf="businessCustomerTempData.licenseDate || businessCustomerData.licenseDate "  >
                                <td style="width: 10%;"> Ngày cấp </td>
                                <td style="width: 40%;">
                                    <div>
                                        <div class="b-wrapper-info b-cut-text"> {{businessCustomerData?.licenseDate ?? 'None' | dateview   }}  </div>
                                    </div>
                                </td>
                                <td style="width: 10%;"><i class="pi pi-arrow-circle-right"></i></td>
                                <td style="width: 40%;"> 
                                    <div>
                                        <div class="b-wrapper-info b-cut-text"> {{ businessCustomerTempData?.licenseDate ?? 'None'  | dateview}}   </div>
                                    </div>
                                </td>
                            </tr>
                            <tr *ngIf="businessCustomerTempData.licenseIssuer || businessCustomerData.licenseIssuer "  >
                                <td style="width: 10%;"> Nơi cấp </td>
                                <td style="width: 40%;">
                                    <div>
                                        <div class="b-wrapper-info b-cut-text"> {{businessCustomerData?.licenseIssuer  ?? 'None'}}  </div>
                                    </div>
                                </td>
                                <td style="width: 10%;"><i class="pi pi-arrow-circle-right"></i></td>
                                <td style="width: 40%;"> 
                                    <div>
                                        <div class="b-wrapper-info b-cut-text"> {{ businessCustomerTempData?.licenseIssuer ?? 'None'}}   </div>
                                    </div>
                                </td>
                            </tr>
                            <tr *ngIf="businessCustomerTempData.capital || businessCustomerData.capital "  >
                                <td style="width: 10%;"> Vốn điều lệ </td>
                                <td style="width: 40%;">
                                    <div>
                                        <div class="b-wrapper-info b-cut-text"> {{businessCustomerData?.capital ?? 'None'}}  </div>
                                    </div>
                                </td>
                                <td style="width: 10%;"><i class="pi pi-arrow-circle-right"></i></td>
                                <td style="width: 40%;"> 
                                    <div>
                                        <div class="b-wrapper-info b-cut-text"> {{ businessCustomerTempData?.capital ?? 'None'}}   </div>
                                    </div>
                                </td>
                            </tr>
                            <tr *ngIf="businessCustomerTempData.repName || businessCustomerData.repName "  >
                                <td style="width: 10%;"> Tên tài khoản </td>
                                <td style="width: 40%;">
                                    <div>
                                        <div class="b-wrapper-info b-cut-text"> {{businessCustomerData?.repName ?? 'None'}}  </div>
                                    </div>
                                </td>
                                <td style="width: 10%;"><i class="pi pi-arrow-circle-right"></i></td>
                                <td style="width: 40%;"> 
                                    <div>
                                        <div class="b-wrapper-info b-cut-text"> {{ businessCustomerTempData?.repName ?? 'None'}}   </div>
                                    </div>
                                </td>
                            </tr>
                            <tr *ngIf="businessCustomerTempData.repPosition || businessCustomerData.repPosition "  >
                                <td style="width: 10%;"> Chức vụ </td>
                                <td style="width: 40%;">
                                    <div>
                                        <div class="b-wrapper-info b-cut-text"> {{businessCustomerData?.repPosition ?? 'None'}}  </div>
                                    </div>
                                </td>
                                <td style="width: 10%;"><i class="pi pi-arrow-circle-right"></i></td>
                                <td style="width: 40%;"> 
                                    <div>
                                        <div class="b-wrapper-info b-cut-text"> {{ businessCustomerTempData?.repPosition ?? 'None'}}   </div>
                                    </div>
                                </td>
                            </tr>
                            <tr *ngIf="businessCustomerTempData.decisionNo || businessCustomerData.decisionNo "  >
                                <td style="width: 10%;"> Quyết định số </td>
                                <td style="width: 40%;">
                                    <div>
                                        <div class="b-wrapper-info b-cut-text"> {{businessCustomerData?.decisionNo ?? 'None'}}  </div>
                                    </div>
                                </td>
                                <td style="width: 10%;"><i class="pi pi-arrow-circle-right"></i></td>
                                <td style="width: 40%;"> 
                                    <div>
                                        <div class="b-wrapper-info b-cut-text"> {{ businessCustomerTempData?.decisionNo ?? 'None'}}   </div>
                                    </div>
                                </td>
                            </tr>
                            <tr *ngIf="businessCustomerTempData.decisionDate || businessCustomerData.decisionDate "  >
                                <td style="width: 10%;"> Ngày quyết định </td>
                                <td style="width: 40%;">
                                    <div>
                                        <div class="b-wrapper-info b-cut-text"> {{businessCustomerData?.decisionDate ?? 'None' | dateview}}  </div>
                                    </div>
                                </td>
                                <td style="width: 10%;"><i class="pi pi-arrow-circle-right"></i></td>
                                <td style="width: 40%;"> 
                                    <div>
                                        <div class="b-wrapper-info b-cut-text"> {{ businessCustomerTempData?.decisionDate  ?? 'None'| dateview}}   </div>
                                    </div>
                                </td>
                            </tr>
                            <tr *ngIf="businessCustomerTempData.numberModified || businessCustomerData.numberModified "  >
                                <td style="width: 10%;"> Số lần thay đổi </td>
                                <td style="width: 40%;">
                                    <div>
                                        <div class="b-wrapper-info b-cut-text"> {{businessCustomerData?.numberModified ?? 'None' }}  </div>
                                    </div>
                                </td>
                                <td style="width: 10%;"><i class="pi pi-arrow-circle-right"></i></td>
                                <td style="width: 40%;"> 
                                    <div>
                                        <div class="b-wrapper-info b-cut-text"> {{ businessCustomerTempData?.numberModified ?? 'None' }}   </div>
                                    </div>
                                </td>
                            </tr>
                            <tr *ngIf="businessCustomerTempData.website || businessCustomerData.website "  >
                                <td style="width: 10%;"> Website </td>
                                <td style="width: 40%;">
                                    <div>
                                        <div class="b-wrapper-info b-cut-text"> {{businessCustomerData?.website ?? 'None' }}  </div>
                                    </div>
                                </td>
                                <td style="width: 10%;"><i class="pi pi-arrow-circle-right"></i></td>
                                <td style="width: 40%;"> 
                                    <div>
                                        <div class="b-wrapper-info b-cut-text"> {{ businessCustomerTempData?.website ?? 'None' }}   </div>
                                    </div>
                                </td>
                            </tr>
                            <tr *ngIf="businessCustomerTempData.fanpage || businessCustomerData.fanpage "  >
                                <td style="width: 10%;"> Fanpage </td>
                                <td style="width: 40%;">
                                    <div>
                                        <div class="b-wrapper-info b-cut-text"> {{businessCustomerData?.fanpage ?? 'None' }}  </div>
                                    </div>
                                </td>
                                <td style="width: 10%;"><i class="pi pi-arrow-circle-right"></i></td>
                                <td style="width: 40%;"> 
                                    <div>
                                        <div class="b-wrapper-info b-cut-text"> {{ businessCustomerTempData?.fanpage ?? 'None' }}   </div>
                                    </div>
                                </td>
                            </tr>
                            <tr *ngIf="businessCustomerTempData.server || businessCustomerData.server "  >
                                <td style="width: 10%;"> Địa chỉ Server </td>
                                <td style="width: 40%;">
                                    <div>
                                        <div class="b-wrapper-info b-cut-text"> {{businessCustomerData?.server ?? 'None' }}  </div>
                                    </div>
                                </td>
                                <td style="width: 10%;"><i class="pi pi-arrow-circle-right"></i></td>
                                <td style="width: 40%;"> 
                                    <div>
                                        <div class="b-wrapper-info b-cut-text"> {{ businessCustomerTempData?.server ?? 'None' }}   </div>
                                    </div>
                                </td>
                            </tr>
                            <tr *ngIf="businessCustomerTempData.key || businessCustomerData.key "  >
                                <td style="width: 10%;"> Key </td>
                                <td style="width: 40%;">
                                    <div>
                                        <div class="b-wrapper-info b-cut-text"> {{businessCustomerData?.key ?? 'None' }}  </div>
                                    </div>
                                </td>
                                <td style="width: 10%;"><i class="pi pi-arrow-circle-right"></i></td>
                                <td style="width: 40%;"> 
                                    <div>
                                        <div class="b-wrapper-info b-cut-text"> {{ businessCustomerTempData?.key ?? 'None' }}   </div>
                                    </div>
                                </td>
                            </tr>
                            <tr *ngIf="businessCustomerTempData.secret || businessCustomerData.secret "  >
                                <td style="width: 10%;"> Secret </td>
                                <td style="width: 40%;">
                                    <div>
                                        <div class="b-wrapper-info b-cut-text"> {{businessCustomerData?.secret ?? 'None' }}  </div>
                                    </div>
                                </td>
                                <td style="width: 10%;"><i class="pi pi-arrow-circle-right"></i></td>
                                <td style="width: 40%;"> 
                                    <div>
                                        <div class="b-wrapper-info b-cut-text"> {{ businessCustomerTempData?.secret ?? 'None' }}   </div>
                                    </div>
                                </td>
                            </tr>
                        </ng-template>
        
                        <ng-template pTemplate="emptymessage">
                            <tr>
                                <td colspan="6">
                                    <div>
                                        <div class="b-wrapper-info b-empty-data"> Không có dữ liệu </div>
                                    </div>
                                    
                                </td>
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="loadingbody">
                            <tr>
                                <td colspan="7"> Đang tải dữ liệu ... </td>
                            </tr>
                        </ng-template>
                    </p-table>
                </p-tabPanel>
                
                <p-tabPanel>
                    <ng-template pTemplate="header">
                        <span> Tài khoản ngân hàng
                            <!-- <p-badge class="mb-2" [value]="(countBankTemp- countBankNull)" severity="danger" styleClass="mr-2"></p-badge> -->
                        </span>
                    </ng-template>
                    <h6 style="padding-top: 2rem;"> Tài khoản đã thêm mới </h6>
                    <p-table #userTable responsiveLayout="scroll" dataKey="id" styleClass="custom-table"
                            [value]="businessCustomerBankTemp" [rowHover]="true" [paginator]="false" [scrollable]="true">
                        <ng-template pTemplate="header">
                            <tr>
                                <th style="width:12rem;"> Số tài khoản </th>
                                <th style="width:15rem;"> Tên tài khoản </th>
                                <th style="width:15rem;"> Tên ngân hàng </th>
                                <th style="width:15rem;"> Chi nhánh ngân hàng </th>
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="body" let-row let-rowIndex="rowIndex">
                            <tr *ngIf="row.bankAccNo || row.bankAccName ||  row.bankName" >
                                <td ng style="width:12rem;"> {{ row.bankAccNo }} </td>
                                <td style="width:15rem;"> {{ row.bankAccName}} </td>
                                <td style="width:15rem;">{{ row.bankName }}</td>
                                <td style="width:15rem;">{{ row.bankBranchName }}</td>
                            </tr>
                        </ng-template>

                        <ng-template pTemplate="emptymessage">
                            <tr>
                                <td colspan="7">Không có dữ liệu.</td>
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="loadingbody">
                            <tr>
                                <td colspan="7"> Đang tải dữ liệu ... </td>
                            </tr>
                        </ng-template>
                    </p-table>
                </p-tabPanel>
            </p-tabView>
        </div>
    </ng-template>
    <ng-template pTemplate="footer">
    </ng-template>
</p-card>